{% extends 'base.html' %}
{% load static %}

{% block main_style %}
    <link href="{% static 'assets/css/sb-admin-2.min.css' %}" rel="stylesheet">
    <link href="{% static 'assets/css/slider.css' %}" rel="stylesheet">
    <link href="{% static 'assets/vendor/datatables/dataTables.bootstrap4.min.css' %}" rel="stylesheet">
    <script src="{% static 'assets/js/Chart.min.js' %}"></script>
    <script src="{% static 'assets/js/utils.js' %}"></script>
{% endblock main_style %}

{% block content %}

  <main id="main">

    <!-- ======= Breadcrumbs ======= -->
    <div class="breadcrumbs" data-aos="fade-in">
      <div class="container">
        <h2>Leader Board</h2>
      </div>

            <p>{{ event.title }}</p>

    </div><!-- End Breadcrumbs -->

    <!-- ======= Events Section ======= -->
    <section id="" class="">
        <div class="container" data-aos="fade-up">
    <div class="row">
        <div class="col-lg-8">

            <div class="card shadow mb-4">
                <div class="card-header py-3">

                    <div class="row">
                        <div class="col-lg-9 col-9">
                            <h6 class="m-0 font-weight-bold text-primary align-middle">Leaderboard</h6>
                        </div>
                        <div class="col-lg-3 col-3">
                            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#logPomodoro">
                                Log Pomodoro
                            </button>
                        </div>
                    </div>


                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                            <thead>
                            <tr>
                                {#                      <th>Rank</th>#}
                                <th>User</th>
                                <th>Pomodoro Count</th>
                                <th>Productivity</th>
                                <th>Energy</th>
                            </tr>
                            </thead>

                            <tbody>
                            {% for member in leaderboard %}
                                <tr>
                                    {#                      <th scope="row">{{ member.user.id }}</th>#}
                                    <td><img src="{{ member.user.profile.image.url }}" alt="{{ member.username }}" class="rounded-circle avatar mr-2" width="50px"><span>{{ member.user.username }}</span> </td>
                                    <td>{{ member.count }}</td>
                                    <td>{{ member.productivity|floatformat:2 }}</td>
                                    <td>{{ member.energy|floatformat:2 }}</td>
                                </tr>
                            {% endfor %}
                            </tbody>

                        </table>
                    </div>
                </div>
            </div>
            {#            <div class="card shadow mb-4">#}
            {#            <div class="card-header py-3">#}
            {#              <h6 class="m-0 font-weight-bold text-primary">Pair</h6>#}
            {#            </div>#}
            {#            <div class="card-body">#}
            {#              <div class="table-responsive">#}
            {#                <div class="container">#}
            {#                <canvas id="canvas"></canvas>#}
            {#            </div>#}
            {#              </div>#}
            {#            </div>#}
            {#          </div>#}

        </div>

{#        <div class="col-lg-4">#}
{#            <div class="card shadow mb-4">#}
{#            <div class="card-header py-3">#}
{#              <h6 class="m-0 font-weight-bold text-primary">Log Pomodoro</h6>#}
{#            </div>#}
{#                <form action="" class="user" method="POST">#}
{#                    {% csrf_token %}#}
{#                <div class="form-group">#}
{#            <div class="card-body">#}
{#              <div class="slidecontainer">#}
{#                  <label for="myRange1" class="text-info font-weight-bold">Productivity </label><input type="range" min="1" max="100" value="50" name="productivity" class="slider" id="myRange1">#}
{#                    <p class="text-muted"><span id="demomyRange1" class="m-0 font-weight-light"></span></p>#}
{#             </div>#}
{#                <div class="slidecontainer">#}
{#                  <label for="myRange2" class="text-info font-weight-bold">Energy </label><input type="range" min="1" max="100" value="50" name="energy"  class="slider" id="myRange2">#}
{#                    <p class="text-muted"><span id="demomyRange2" class="m-0 font-weight-light"></span></p>#}
{#             </div>#}
{#            </div>#}
{#                </div>#}
{#                <div class="form-group text-center">#}
{#                    <button type="submit" class="btn get-started-btn-special">Log Pomodoro</button>#}
{#                </div>#}
{#                    </form>#}
{##}
{#            </div>#}
{#          </div>#}
        </div>


    </div>


    </section>


  </main><!-- End #main -->



<!-- Modal -->
    <div class="modal fade" id="logPomodoro" tabindex="-1" aria-labelledby="logPomodoroLabel"  aria-hidden="true">
        <div class="modal-dialog">
            <form action="" class="user" method="POST">
                {% csrf_token %}
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Log Pomodoro </h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <div class="card-body">
                                <div class="slidecontainer">
                                    <label for="myRange1" class="text-info font-weight-bold">Productivity </label><input type="range" min="1" max="100" value="50" name="productivity" class="slider" id="myRange1">
                                    <p class="text-muted"><span id="demomyRange1" class="m-0 font-weight-light"></span></p>
                                </div>
                                <div class="slidecontainer">
                                    <label for="myRange2" class="text-info font-weight-bold">Energy </label><input type="range" min="1" max="100" value="50" name="energy"  class="slider" id="myRange2">
                                    <p class="text-muted"><span id="demomyRange2" class="m-0 font-weight-light"></span></p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn get-started-btn-special" data-dismiss="modal">Close</button>
                        <button type="submit" class="btn get-started-btn-special">Save changes</button>
                    </div>
                </div>
            </form>
        </div>
    </div>




{% endblock content %}

{% block script %}
    <script src="{% static 'assets/js/sb-admin-2.min.js' %}"></script>
    <script src="{% static 'assets/vendor/datatables/jquery.dataTables.min.js' %}"></script>
    <script src="{% static 'assets/vendor/datatables/dataTables.bootstrap4.min.js' %}"></script>
    <script src="{% static 'assets/js/demo/datatables-demo.js' %}"></script>
    <script src="{% static 'assets/vendor/chart.js/Chart.min.js' %}"></script>
{#    <script>#}
{#		var config = {#}
{#			type: 'line',#}
{#			data: {#}
{#				labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July',],#}
{#				datasets: [{#}
{#					label: 'My First dataset',#}
{#					backgroundColor: window.chartColors.red,#}
{#					borderColor: window.chartColors.red,#}
{#					data: [10, 30, 39, 20, 25, 34, 10,],#}
{#					fill: false,#}
{#				}, {#}
{#					label: 'My Second dataset',#}
{#					fill: false,#}
{#					backgroundColor: window.chartColors.blue,#}
{#					borderColor: window.chartColors.blue,#}
{#					data: [18, 33, 22, 19, 11, 39, 30],#}
{#				}]#}
{#			},#}
{#			options: {#}
{#				responsive: true,#}
{#				title: {#}
{#					display: true,#}
{#					text: 'Min and Max Settings'#}
{#				},#}
{#				scales: {#}
{#					yAxes: [{#}
{#						ticks: {#}
{#							// the data minimum used for determining the ticks is Math.min(dataMin, suggestedMin)#}
{#							suggestedMin: 10,#}
{##}
{#							// the data maximum used for determining the ticks is Math.max(dataMax, suggestedMax)#}
{#							suggestedMax: 50#}
{#						}#}
{#					}]#}
{#				}#}
{#			}#}
{#		};#}
{##}
{#		window.onload = function() {#}
{#			var ctx = document.getElementById('canvas').getContext('2d');#}
{#			window.myLine = new Chart(ctx, config);#}
{#		};#}
{#	</script>#}


    <script>
        var slider1 = document.getElementById("myRange1");
        var output1 = document.getElementById("demomyRange1");
        var slider2 = document.getElementById("myRange2");
        var output2 = document.getElementById("demomyRange2");
        output1.innerHTML = (slider1.value * 0.05).toFixed(2);

        slider1.oninput = function() {
            output1.innerHTML = (this.value * 0.05).toFixed(2);
        }
        output2.innerHTML = (slider2.value * 0.05).toFixed(2);

        slider2.oninput = function() {
            output2.innerHTML = (this.value * 0.05).toFixed(2);
        }
    </script>

{% endblock %}